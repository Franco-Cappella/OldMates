@using OldMates.Models
@{
    ViewData["Title"] = "Actividad Unica";

    List<Evento> Eventos = ViewBag.Eventos;
    List<int> EventosInscripto = ViewBag.EventosInscripto ?? new List<int>();
    int IDUsuario = ViewBag.IDUsuario;
    
    Evento evento = null;
    bool inscripto = false;

    if (Eventos != null && Eventos.Count > 0)
    {
        evento = Eventos[0];
        inscripto = EventosInscripto.Contains(evento.ID);
    }
}

@if (evento != null)
{

    <div class="actividad-unica-container">
        
        <div class="actividad-unica-header">
            <h1 class="actividad-unica-titulo">@evento.Titulo</h1>
        </div>

        <img src="@(string.IsNullOrEmpty(evento.Foto) ? "/img/default-evento.png" : evento.Foto)" alt="@evento.Titulo" class="actividad-unica-imagen" />

        <div class="actividad-unica-info">
            <div class="info-item">
                <span class="info-label">Fecha</span>
                <span class="info-value">@evento.Fecha.ToString("dd/MM/yyyy HH:mm")</span>
            </div>

            <div class="info-item">
                <span class="info-label">Localidad</span>
                <span class="info-value">@evento.Localidad</span>
            </div>

            <div class="info-item">
                <span class="info-label">Duración</span>
                <span class="info-value">@evento.Duracion</span>
            </div>

            <div class="info-item">
                <span class="info-label">Capacidad</span>
                <span class="info-value">@evento.Capacidad personas</span>
            </div>

            <div class="info-item">
                <span class="info-label">Intereses</span>
                <span class="info-value">@evento.Intereses</span>
            </div>

            @if (evento.Eliminada)
            {
                <div class="info-item" style="border-left-color: #dc3545;">
                    <span class="info-label">Estado</span>
                    <span class="info-value" style="color: #dc3545;">Evento Cancelado</span>
                </div>
            }
        </div>

        <div class="actividad-unica-descripcion">
            <h3>Descripción</h3>
            <p>@evento.Descripcion</p>
        </div>

        <div class="actividad-unica-acciones">
            @if (evento.IDCreador == IDUsuario)
            {
                <a class="btn btn-warning" href="@Url.Action("ModificarEvento", "Home", new { IDEvento = evento.ID })">
                    Editar Evento
                </a>
                <a class="btn btn-danger" href="@Url.Action("BorrarEvento", "Home", new { IDEvento = evento.ID })" 
                   onclick="return confirm('¿Estás seguro de eliminar este evento?');">
                    Eliminar Evento
                </a>
            }
            else
            {
                @if (inscripto)
                {
                    <a class="btn btn-secondary" href="@Url.Action("DesInscribirse", "Home", new { IDUsuario = IDUsuario, IDEvento = evento.ID })">
                        Desinscribirse
                    </a>
                }
                else
                {
                    <a class="btn btn-primary" href="@Url.Action("DesInscribirse", "Home", new { IDUsuario = IDUsuario, IDEvento = evento.ID })">
                        Inscribirse
                    </a>
                }
            }
        </div>

    </div>
}
else
{
    <p class="empty-message">No se encontró el evento solicitado.</p>
}

